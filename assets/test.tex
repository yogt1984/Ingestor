\documentclass{article}
\usepackage{amsmath, amssymb}
\usepackage{geometry}
\geometry{margin=0.8cm, top=2cm, bottom=2cm, left=0.8cm, right=0.8cm}  % Adjusted margins for better visibility
\usepackage[active,tightpage]{preview}  % Add preview package for cropping
\PreviewEnvironment{align*}  % Crop around align* environment

\begin{document}

\noindent\textbf{General Limit Order Book Format}\vspace{0.5cm}
\begin{align*}
    LOB_t = \{(p_i, v_i, d_i) \mid i = 1, 2, \dots, N\}
\end{align*}
\noindent where $p_i$ represents price level, $v_i$ is the volume at price $p_i$, and $d_i$ is the direction ($+1$ for buy, $-1$ for sell).\vspace{1cm}

\noindent\textbf{Base Features (Computed with Rust)}\vspace{0.3cm}
\begin{align*}
    &\text{Mid (\textit{Midpoint Price})} = \frac{A + B}{2} \\
    &\text{Spread (\textit{Spread})} = A - B \\
    &\text{VolImb (\textit{Volume Imbalance})} = \frac{V_B - V_A}{V_B + V_A} \\
    &\text{PWVolImb (\textit{Price-Weighted Volume Imbalance})} = \frac{\sum_{i} p_i v_i d_i}{\sum_{i} v_i} \\
    &\text{MomentumN (\textit{Momentum with respect to N periods})} = P_t - P_{t-N} \\
    &\text{VolatilityN (\textit{Volatility computed with respect to N periods})} = \sqrt{\frac{1}{N} \sum_{i=1}^{N} (r_i - \bar{r})^2} \\
    &\text{DepthN (\textit{Depth in top N levels})} = \sum_{i=1}^{N} v_{i}^{\text{bid}} + \sum_{i=1}^{N} v_{i}^{\text{ask}}
\end{align*}\vspace{1cm}

\noindent\textbf{Advanced Features (Computed with Python)}\vspace{0.3cm}
\begin{align*}
    &\text{FFT\_BaseFeature\_K (\textit{Fast Fourier Transform of BaseFeature over K periods})} \\
    &\text{SpecDens\_BaseFeature\_K (\textit{Spectral Density of BaseFeature computed over K periods})} \\
    &\text{SpecCentroid\_BaseFeature\_K (\textit{Spectral Centroid of BaseFeature})} \\
    &\text{SpecSpread\_BaseFeature\_K (\textit{Spectral Spread of BaseFeature})} \\
    &\text{SpecEntropy\_BaseFeature\_K (\textit{Spectral Entropy of BaseFeature})}
\end{align*}\vspace{1cm}

\noindent\textbf{Mathematical Definitions for Spectral Features}\vspace{0.3cm}
\begin{align*}
    &\text{FFT\_BaseFeature\_K} = \sum_{k=0}^{K-1} x_k e^{-i 2 \pi k / K} \\
    &\text{SpecDens\_BaseFeature\_K} = \frac{1}{K} \sum_{k=0}^{K-1} |X_k|^2 \\
    &\text{SpecCentroid\_BaseFeature\_K} = \frac{\sum_{k=0}^{K-1} k |X_k|^2}{\sum_{k=0}^{K-1} |X_k|^2} \\
    &\text{SpecSpread\_BaseFeature\_K} = \sqrt{\sum_{k=0}^{K-1} \left( \frac{k}{K} - \text{SpecCentroid\_BaseFeature\_K} \right)^2 |X_k|^2} \\
    &\text{SpecEntropy\_BaseFeature\_K} = -\sum_{k=0}^{K-1} P_k \log P_k, \quad P_k = \frac{|X_k|^2}{\sum_{m=0}^{K-1} |X_m|^2}
\end{align*}

\end{document}
